<link
  href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
  rel="stylesheet"
/>

<style>
  body {
    font-family: Roboto;
  }

  .cta-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    padding-top: 10px;
  }

  .cta-container button {
    border: none;
    outline: none;
    padding: 8px 12px;
    border-radius: 4px;
    font-family: Roboto;
    cursor: pointer;

    &:hover {
      opacity: 0.9;
    }
  }

  .cta-container .generate-code {
    background-color: #0d99ffff;
    color: #ffffff;
  }

  .md-preview {
    background-color: #fff;
    padding: 10px;
    border: 1px dashed #ccc;
    border-radius: 4px;
    overflow: auto;
    margin-top: 16px;
  }
</style>

<!-- 
  HTML Elements 
-->

<div class="cta-container">
  <button id="generateCode" class="generate-code">Generate Code</button>
  <button id="cancel" class="cancel">Cancel</button>
</div>
<div id="md-preview" class="md-preview"></div>

<!-- 
  Scripting 
-->

<script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
<script>
  document.getElementById("generateCode").onclick = () => {
    parent.postMessage({ pluginMessage: { type: "generateCode" } }, "*");
  };

  document.getElementById("cancel").onclick = () => {
    parent.postMessage({ pluginMessage: { type: "cancel" } }, "*");
  };

  const converter = new showdown.Converter();
  window.onmessage = (event) => {
    const { type, payload } = event.data.pluginMessage;

    if (type === "show-md-preview") {
      const html = converter.makeHtml(payload);
      document.getElementById("md-preview").innerHTML = html;
    }
  };
</script>
